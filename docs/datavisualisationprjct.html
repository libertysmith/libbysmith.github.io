<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>datavisualisationprjct – Portfolio of Libby Smith</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Portfolio of Libby Smith</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">CV</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./writing.html"> 
<span class="menu-text">Analysis Writing</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-methods-of-data-collection" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Methods of Data Collection</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-methods-of-data-collection">    
        <li>
    <a class="dropdown-item" href="./assignment1.html">
 <span class="dropdown-text">Create a Qualtrics Survey</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./assignment2.html">
 <span class="dropdown-text">Google Trends VS Rstudio gtrends</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./assignment3.html">
 <span class="dropdown-text">Latent Semantic Text Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./assignment5.html">
 <span class="dropdown-text">Web Scraping for Word Clouds</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./assignment6.html">
 <span class="dropdown-text">Scraping Government Data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./assignment7.html">
 <span class="dropdown-text">API Requests of Public Data</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-independent-research" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Independent Research</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-independent-research">    
        <li>
    <a class="dropdown-item" href="./datacollectionproject.html">
 <span class="dropdown-text">AAPI in the News - NLP Machine Learning</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./datavisualisationprjct.html">
 <span class="dropdown-text">Precinct Voting to County-Wide - Turnout Effects</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-graphics-and-visualizations" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Graphics and Visualizations</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-graphics-and-visualizations">    
        <li>
    <a class="dropdown-item" href="./lab1.html">
 <span class="dropdown-text">The Statistical Importance of Graphics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./lab1b.html">
 <span class="dropdown-text">Critiquing Graphics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./lab2.html">
 <span class="dropdown-text">Selecting Graphical Data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./lab3.html">
 <span class="dropdown-text">Plot Design in R</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./lab3b.html">
 <span class="dropdown-text">When Big Data Goes Bad. A Critique</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./lab3c.html">
 <span class="dropdown-text">Comparing Graphics Approaches</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./lab4.html">
 <span class="dropdown-text">4 Chart Types</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./lab5.html">
 <span class="dropdown-text">Literate Programming</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./lab6.html">
 <span class="dropdown-text">Demonstrating Shiny</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./lab7.html">
 <span class="dropdown-text">Two Shiny Graphics</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#visualizing-changes-in-texas-turnout" id="toc-visualizing-changes-in-texas-turnout" class="nav-link active" data-scroll-target="#visualizing-changes-in-texas-turnout">Visualizing Changes in Texas Turnout:</a></li>
  <li><a href="#precinct-polling-to-county-wide-polling" id="toc-precinct-polling-to-county-wide-polling" class="nav-link" data-scroll-target="#precinct-polling-to-county-wide-polling">Precinct Polling to County-Wide Polling</a>
  <ul class="collapse">
  <li><a href="#methodology" id="toc-methodology" class="nav-link" data-scroll-target="#methodology">Methodology</a></li>
  <li><a href="#interactive-display-of-vtds" id="toc-interactive-display-of-vtds" class="nav-link" data-scroll-target="#interactive-display-of-vtds">Interactive Display of VTDS</a></li>
  <li><a href="#dashboard-of-texas-voter-turnout-rate-data" id="toc-dashboard-of-texas-voter-turnout-rate-data" class="nav-link" data-scroll-target="#dashboard-of-texas-voter-turnout-rate-data">Dashboard of Texas Voter Turnout Rate Data</a></li>
  <li><a href="#temporal-map-of-county-voter-turnout" id="toc-temporal-map-of-county-voter-turnout" class="nav-link" data-scroll-target="#temporal-map-of-county-voter-turnout">Temporal Map of County Voter Turnout</a></li>
  <li><a href="#limitations" id="toc-limitations" class="nav-link" data-scroll-target="#limitations">Limitations</a></li>
  </ul></li>
  <li><a href="#end" id="toc-end" class="nav-link" data-scroll-target="#end">END</a></li>
  </ul>
</nav>
    <div class="quarto-margin-footer"><div class="margin-footer-item">
<p><img src=".\utdfooter.jpg" class="img-fluid"></p>
</div></div></div>
<!-- main -->
<main class="content" id="quarto-document-content">




<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">warning =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/clipboard-2727565579.png" class="quarto-figure quarto-figure-center figure-img" width="552" height="388"></p>
</figure>
</div>
<section id="visualizing-changes-in-texas-turnout" class="level1">
<h1>Visualizing Changes in Texas Turnout:</h1>
</section>
<section id="precinct-polling-to-county-wide-polling" class="level1">
<h1>Precinct Polling to County-Wide Polling</h1>
<p>Co-Authors: Mamie Cincotta, Warren Cox, Shiu-Ting Ling</p>
<p><img src="images/What+are+Countywide+Polling+Locations-2015834426.jpg" class="img-fluid"></p>
<p>This exploratory study examines the effects of transitioning to vote centers in Texas on voter turnout across demographics, election types, and time. The study builds on a mixed body of literature exploring the accessibility and participation impacts of election reforms. Previous research highlights that vote centers, which allow voters to cast ballots at any polling location within their county, reduce logistical barriers and increase convenience, potentially boosting turnout among infrequent voters (Stein &amp; Vonnahme, 2008). However, findings are inconsistent. While some studies report overall turnout increases, particularly in urban areas (Stein &amp; Vonnahme, 2012), others suggest declines, particularly among rural and minority voters, due to limited access to centralized locations (Cortina &amp; Rottinghaus, 2019, 2023).</p>
<p>Additionally, state election laws significantly influence voter participation, with polling location accessibility and voter demographics playing crucial roles in turnout trends (Brady &amp; McNulty, 2011; Cantoni, 2020). Gaps in the literature include a lack of focus on Black and Asian voters, minimal attention to turnout disparities in rural areas, and limited use of visual analyses to explore geographic and demographic patterns. By integrating geospatial and temporal visualizations, this study addresses these gaps and seeks to uncover nuanced patterns that explain the relationship between vote center consolidation and voter turnout in Texas. It also aims to explore whether consolidation reduces turnout among Black voters in rural areas or influences midterm election participation, responding to unresolved questions in the field.</p>
<section id="methodology" class="level2">
<h2 class="anchored" data-anchor-id="methodology">Methodology</h2>
<p>This study utilizes a multi-faceted approach to analyze the effects of vote center implementation on voter turnout across Texas. The data sources include historical election turnout data and polygon shapefiles for Texas counties from the <strong>Texas Capitol Archived Data</strong>, providing detailed election results across multiple election cycles. Demographic data at the county level were sourced from the <strong>U.S. Census Bureau</strong> and the <strong>Texas Association of Counties</strong>, offering insights into population characteristics such as age, race, income, and rural-urban classifications. Voter tabulation district (VTD) boundaries and associated demographic data were sourced from the <strong>2010 Census</strong>, enabling a granular analysis at the sub-county level. Preprocessing involved unifying these datasets by aligning turnout data with demographic and geographic characteristics, ensuring consistency across spatial and temporal scales.</p>
<p>For the <strong>Temporal Map of County Voter Turnout</strong>, percentage changes in turnout were calculated for each election year and type (Presidential, Midterm, and Primary), while each county’s vote center consolidation status was encoded for visualization. The <strong>Dashboard of Texas Voter Turnout Rate Data</strong> integrates line charts, bar charts, scatter plots, and interactive maps to explore voter turnout trends and their relationships with demographic factors, augmented by statistical tests for significance. The <strong>Interactive Display of VTDs</strong> provides a detailed view of turnout patterns and demographic influences at a finer geographic scale, incorporating filters for user-defined parameters like election year, consolidation status, and demographic thresholds. Statistical methods such as Wilcoxon significance tests were employed to compare turnout differences across groups. These visualizations collectively leverage robust datasets and dynamic tools to uncover spatial and temporal trends, offering nuanced insights into the relationships between vote center implementation, voter turnout, and demographic characteristics.</p>
</section>
<section id="interactive-display-of-vtds" class="level2">
<h2 class="anchored" data-anchor-id="interactive-display-of-vtds">Interactive Display of VTDS</h2>
<div style="width: 100%; height: 800px;">
<p><iframe src="https://warren-cox.shinyapps.io/VTDFinal/" style="width: 100%; height: 800px; border: none;"></iframe></p>
</div>
<p>The Interactive Display of Voter Tabulation Districts (VTDs) provides a fine-grained, dynamic exploration of voter turnout trends and demographic influences at a sub-county level. Built using Shiny, this visualization allows users to filter data by election year, demographic characteristics, turnout thresholds, and vote center consolidation status. The display includes features such as a color-coded map of VTDs, interactive popups with demographic and turnout information, and customizable comparisons across elections or consolidation statuses. The map is powered by user inputs, enabling detailed investigations of patterns that may not be apparent at the broader county level. Additionally, the dashboard includes a report generation feature that produces side-by-side boxplots and density plots, accompanied by statistical significance tests to assess differences in turnout or turnout changes.</p>
<p>One of the unique aspects of this visualization is its incorporation of <strong>Wilcoxon significance tests</strong>, which compare selected VTDs against the entire dataset, as well as subsets grouped by demographic and consolidation status. The Wilcoxon test was chosen due to the non-normal distribution of voter turnout data at the VTD level, caused by outliers such as sparsely populated VTDs with disproportionately high turnout. These tests provide p-values indicating whether differences in turnout between groups are statistically significant. For example:</p>
<ul>
<li><p>VTDs with high Black or Hispanic populations consistently exhibited lower turnout compared to majority-white VTDs. However, in consolidated counties, minority-dense VTDs showed significantly higher turnout rates than their unconsolidated counterparts. This supports the hypothesis that vote centers can help mitigate turnout disparities in minority communities.</p></li>
<li><p>Turnout disparities were more pronounced in rural VTDs, where consolidation seemed to have a less consistent impact. In urban VTDs, vote centers were associated with slightly higher turnout rates across demographic groups.</p></li>
<li><p>The statistical tests confirmed that demographic factors such as race and poverty significantly influence turnout. For example, VTDs with higher poverty rates generally had lower turnout, but those in consolidated counties performed better relative to similar unconsolidated VTDs.</p></li>
<li><p>The display also allowed for longitudinal comparisons, revealing that consolidated VTDs experienced greater growth in voter turnout over time, particularly in presidential elections. However, this trend was less evident in midterm and primary elections.</p></li>
</ul>
<p>By enabling users to filter data dynamically and providing statistical significance tests, the Interactive Display of VTDs offers robust tools for exploring complex turnout dynamics. Its findings emphasize the potential of vote centers to address inequities in voter participation, particularly for minority and economically disadvantaged populations, while highlighting the variability of these effects across different contexts.</p>
</section>
<section id="dashboard-of-texas-voter-turnout-rate-data" class="level2">
<h2 class="anchored" data-anchor-id="dashboard-of-texas-voter-turnout-rate-data">Dashboard of Texas Voter Turnout Rate Data</h2>
<div style="width: 100%; height: 2000px;">
<p><iframe src="https://sarahokra.shinyapps.io/Texas_Election_Turnout/" style="width: 100%; height: 800px; border: none;"></iframe></p>
</div>
<p>The Dashboard of Texas Voter Turnout Rate Data was created to provide an interactive platform for examining overall voter turnout trends, demographic influences, and the role of vote centers in Texas elections. Built with Shiny and Flex Dashboard, the dashboard integrates four types of visualizations—line charts, bar charts, maps, and scatter plots—to explore turnout rates across different election types (Presidential, Midterm, and Primary) from 2012 to 2022. Each panel serves a distinct purpose: the line chart visualizes trends in voter registration and participation over time, the bar chart ranks counties by turnout rates, the map examines spatial distribution of turnout and vote center implementation, and the scatter plots investigate relationships between demographic factors and turnout.</p>
<ul>
<li><p>Counties with higher median age consistently showed a significant positive correlation with voter turnout across all election types.</p></li>
<li><p>Higher levels of education and income also correlated positively with turnout in presidential and midterm elections, with p-values confirming statistical significance.</p></li>
<li><p>However, factors like race and urbanization exhibited more complex and weaker correlations, often varying by election type.</p></li>
</ul>
<p>The dashboard’s primary purpose is to allow users to analyze how voter turnout interacts with both demographic characteristics (e.g., age, education, income, race) and vote center status. For example, the scatter plots revealed that counties with higher median ages and education levels tend to have higher voter turnout. The map panel further demonstrated that vote center participation (highlighted with pink borders) does not consistently correlate with higher turnout rates, challenging the hypothesis that vote centers universally boost participation. This visualization highlights the complexity of turnout dynamics, suggesting that demographic, geographic, and political factors may intersect in ways that overshadow the direct effects of vote center policies.</p>
</section>
<section id="temporal-map-of-county-voter-turnout" class="level2">
<h2 class="anchored" data-anchor-id="temporal-map-of-county-voter-turnout">Temporal Map of County Voter Turnout</h2>
<div style="width: 100%; height: 800px;">
<p><iframe src="https://libby-smith.shinyapps.io/votecenters_app/" style="width: 100%; height: 800px; border: none;"></iframe></p>
</div>
<p>The Temporal Map of County Voter Turnout is an interactive visualization designed to explore voter turnout trends at the county level over multiple election years and types. Built as a Shiny app using the Leaflet library, the map allows users to dynamically select election types (Presidential, Midterm, or Primary) and years to examine percentage changes in turnout. This visualization serves the purpose of illustrating both spatial and temporal patterns in voter engagement, with a specific emphasis on understanding how vote center consolidation influences turnout trends across Texas counties. The chloropleth map uses a gradient color scale to represent turnout changes, with darker greens indicating significant increases and reds showing declines, while consolidated counties are highlighted with distinctive navy borders. Additionally, hover-over and click interactions provide detailed demographic and turnout data for individual counties, enabling a deeper exploration of the relationship between consolidation status and turnout.</p>
<p>The visualization revealed that consolidated counties, particularly in urban areas, often exhibited higher turnout changes compared to unconsolidated counties in presidential elections. However, the effect was less consistent for rural areas and midterm elections. This mixed pattern suggests that other factors, such as demographic shifts or political dynamics, may influence turnout more significantly than vote center consolidation alone. By enabling users to examine turnout trends at multiple spatial and temporal scales, the map provides a nuanced tool for investigating how changes in polling accessibility interact with voter engagement across diverse contexts.</p>
</section>
<section id="limitations" class="level2">
<h2 class="anchored" data-anchor-id="limitations">Limitations</h2>
<p>The study and its visualizations face several limitations that constrain their ability to provide definitive conclusions. A primary limitation is the narrow temporal scope, as the available data spans only a limited number of election years (2012 to 2024) since the implementation of vote centers in Texas, restricting insights into long-term trends. For the Temporal Map of County Voter Turnout, the focus on county-level data obscures localized effects within counties, such as those in minority-dense or rural areas, limiting its ability to capture granular variations. The Dashboard of Texas Voter Turnout Rate Data, while robust in its demographic analysis and statistical testing, is constrained by its reliance on aggregated county-level data, which may oversimplify the complex interplay between demographic factors and turnout.</p>
<p>Additionally, its scatterplots only reveal correlations, not causation, and lack control for confounding variables. The Interactive Display of VTDs, though offering a finer spatial resolution and incorporating significance testing, depends on VTD demographic data from 2010 census estimates, potentially overlooking demographic shifts over time. Furthermore, the non-normal distribution of turnout data necessitates robust statistical methods, but these may still be influenced by outliers, such as sparsely populated VTDs. Collectively, these limitations highlight the need for expanded datasets, additional election cycles, and more advanced statistical methods to fully understand the impacts of vote centers on voter turnout.</p>
</section>
</section>
<section id="end" class="level1">
<h1>END</h1>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>